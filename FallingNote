import javax.swing.*;
import java.awt.*;

public class FallingNote {

    final private int WINDOW_WIDTH = 1000;

    final private DDRViewer window;
    private Image image;

    private int x;
    private int y = 0;
    private int dy = 20;

    final private int height = 50;
    final private int width = 50;

    final private int direction;

    private boolean timesUp = false;

    public FallingNote(int direction, int y, DDRViewer window){
        this.direction = direction;
        setDirection(direction);
        this.y = -y;
        this.window = window;
    }

    public void setDirection(int direction){
        if(direction == 0){
            //112 (width of button) - 25 (half width of note)
            x = WINDOW_WIDTH/2 - 87;
            ImageIcon upNote = new ImageIcon("Resources/upNote.png");
            image = upNote.getImage();
        }
        if(direction == 1){
            x = WINDOW_WIDTH/2 + 25;
            ImageIcon downNote = new ImageIcon("Resources/downNote.png");
            image = downNote.getImage();
        }
        if(direction == 2){
            x = WINDOW_WIDTH/2 + 137;
            ImageIcon rightNote = new ImageIcon("Resources/rightNote.png");
            image = rightNote.getImage();
        }
        if(direction == 3){
            //195 Is the width of 1.5 Buttons plus the 1/2 the width, so it spawns in the middle.
            x = WINDOW_WIDTH/2 - 195;
            ImageIcon leftNote = new ImageIcon("Resources/leftNote.png");
            image  = leftNote.getImage();
        }
    }
    public void move() {
        if(!checkCollision()){
            y = y + dy;
        }
    }

    public void draw(Graphics g){
        g.drawImage(image, x, y, width, height, window);
    }

    public void scored(){
        y = -100000;
        window.getGame().playSound("Resources/point.wav");
    }

    public boolean checkCollision() {
        for(int i = 0; i < 40; i++) {
            if (y == window.getButtonY() - width + i) {
                timesUp = true;
                window.getGame().changeFrontNote(this);
                return true;
            }
        }
            return false;
        }

    public boolean inFieldOfPlay(){
        if(y > 0){
            return true;
        }
        else{
            return false;
        }
    }

    public int getX(){
        return x;
    }
    public int getY(){
        return y;
    }

    public int getDirection(){
        return direction;
    }

    public void increaseDY(int streak){
        dy += 10 * (int) (streak / 10);
    }
}

